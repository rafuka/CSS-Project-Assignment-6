var shopItems=document.getElementsByClassName("product"),cart=document.getElementById("cart"),cartContainer=document.getElementById("cart-container"),shop=document.getElementById("grid"),openCartBtn=document.getElementById("open-cart-btn"),closeCartBtn=document.getElementById("close-cart-btn"),coupon1="DEADBEEF",coupon2="BLAHBLAH",coupon3="YADAYADA",couponElement=document.querySelector("#coupon"),totalPrice=0,cartList=[{id:"product-1",cartId:"cart-product-1",title:"Buggawatts",desc:"",price:10,img:"http://placehold.it/200x200",qty:1},{id:"product-4",cartId:"cart-product-4",title:"Jawaka",desc:"",price:9.99,img:"http://placehold.it/200x200",qty:1},{id:"product-2",cartId:"cart-product-2",title:"Schwein",desc:"",price:12,img:"http://placehold.it/200x200",qty:1}];function openCart(t){cart.classList.add("visible"),document.body.classList.add("popup")}function closeCart(t){cart.classList.remove("visible"),document.body.classList.remove("popup")}function addToCart(t){for(var e in cartList)if(cartList[e].id==t.id)return cartList[e].qty++,document.querySelector("#"+cartList[e].cartId+" .quantity input").value++,updateTotalPrice(),void updateCartNumber();createNewCartItem(t),updateTotalPrice(),updateCartNumber()}function updateTotalPrice(){if(totalPrice=0,couponElement.value===coupon1)for(var t in cartList)"Buggawatts"===cartList[t].title?totalPrice+=cartList[t].price*cartList[t].qty-cartList[t].price*cartList[t].qty*.1:totalPrice+=cartList[t].price*cartList[t].qty;else if(couponElement.value===coupon2)for(var t in cartList)10<=cartList[t].price?totalPrice+=cartList[t].price*cartList[t].qty-cartList[t].price*cartList[t].qty*.15:totalPrice+=cartList[t].price*cartList[t].qty;else if(couponElement.value===coupon3){for(var t in cartList)totalPrice+=cartList[t].price*cartList[t].qty;totalPrice-=.05*totalPrice}else for(var t in cartList)totalPrice+=cartList[t].price*cartList[t].qty;document.querySelector("#total-price p").innerHTML=totalPrice.toFixed(2)+"$"}function createNewCartItem(t){var e={id:t.id,cartId:"cart-"+t.id,title:t.querySelector(".product-title").innerHTML,img:t.querySelector(".product-img").getAttribute("src"),desc:t.querySelector(".product-description").innerHTML,price:t.querySelector(".product-price").innerHTML,qty:1};cartList.push(e);var a=document.createElement("article");a.className="cart-product",a.id=e.cartId;var r=document.createElement("img");r.className="product-img",r.src=e.img,r.title="product image",r.alt="product image";var c=document.createElement("div");c.className="description";var i=document.createElement("div");i.className="price";var n=document.createElement("div");n.className="quantity";var o=document.createElement("div");o.className="button-wrap";var d=document.createElement("h2");d.className="product-title";var u=document.createElement("p");u.className="product-description";var l=document.createElement("h2"),p=document.createElement("p"),s=document.createElement("h2"),m=document.createElement("button");m.className="less";var L=document.createElement("input");L.className="qnum",L.type="number",L.name="product-quantity",L.value="1",L.disabled="disabled";var v=document.createElement("button");v.className="plus";var C=document.createElement("button");C.className="remove";var y=document.createTextNode(""+e.title),E=document.createTextNode(""+e.desc),N=document.createTextNode("Price"),h=document.createTextNode(e.price+"$"),q=document.createTextNode("Quantity"),f=document.createTextNode("-");f.className="less";var g=document.createTextNode("+");g.className="plus";var T=document.createTextNode("Remove from Cart");d.appendChild(y),u.appendChild(E),l.appendChild(N),p.appendChild(h),s.appendChild(q),m.appendChild(f),v.appendChild(g),C.appendChild(T),c.appendChild(d),c.appendChild(u),i.appendChild(l),i.appendChild(p),n.appendChild(s),n.appendChild(m),n.appendChild(L),n.appendChild(v),o.appendChild(C),a.appendChild(r),a.appendChild(c),a.appendChild(i),a.appendChild(n),a.appendChild(o),cartContainer.appendChild(a)}function removeFromCart(t){for(var e in cartList)if(cartList[e].cartId===t.id&&confirm("Are you sure you want to remove the item '"+t.querySelector(".product-title").innerHTML+"' from your Cart?"))return cartList.splice(e,1),t.parentNode.removeChild(t),updateTotalPrice(),updateCartNumber(),!0;return!1}function updateCartNumber(){var t=0;for(var e in cartList)t+=cartList[e].qty;document.getElementById("cart-num").innerHTML=t}updateTotalPrice(),updateCartNumber(),openCartBtn.addEventListener("click",openCart,!1),closeCartBtn.addEventListener("click",closeCart,!1),shop.addEventListener("click",function(t){t.target.classList.contains("add-to-cart")&&addToCart(t.target.parentNode)}),cart.addEventListener("click",function(t){t.target.classList.contains("remove")&&removeFromCart(e=t.target.parentNode.parentNode);if(t.target.classList.contains("less")){var e=t.target.parentNode.parentNode;for(var a in cartList)cartList[a].cartId===e.id&&(1<=cartList[a].qty&&(cartList[a].qty--,document.querySelector("#"+e.id+" .quantity input").value--),0==cartList[a].qty&&(removeFromCart(e)||(cartList[a].qty=1,document.querySelector("#"+e.id+" .quantity input").value=1)));updateTotalPrice(),updateCartNumber()}if(t.target.classList.contains("plus")){e=t.target.parentNode.parentNode;for(var a in cartList)cartList[a].cartId===e.id&&(cartList[a].qty++,document.querySelector("#"+e.id+" .quantity input").value++,updateTotalPrice(),updateCartNumber())}}),couponElement.addEventListener("input",function(t){couponElement.value===coupon1||couponElement.value===coupon2||couponElement.value===coupon3?couponElement.style.backgroundColor="#8f8":couponElement.style.backgroundColor="#fff",updateTotalPrice()});