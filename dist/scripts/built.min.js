!function(c,t,n){var m={},g={},o=0,s=0,l=c("#total-price"),e=document.getElementById("shop-template").innerHTML,a=t.compile(e),i=document.getElementById("cart-template").innerHTML,r=t.compile(i),d=c("#shop-list"),p=c("#cart"),f=c("#cart-list"),y=c("#modal-overlay"),h=c("#cart-num");function u(){for(var t=o=s=0,e=g.items.length;t<e;t++){var a=g.items[t];s+=a.price*a.qty,o+=a.qty}h.text(o),l.text(s.toFixed(2));var i=r(g);f.html(i)}localStorage.getItem("cartData")?(g=JSON.parse(localStorage.getItem("cartData")),u()):g={items:[]},c.getJSON("shopdata.json",function(t){var e=a(m=t);document.getElementById("shop-list").innerHTML+=e;var r=c("#cart-icon");d.on("click",".shop-item__add-btn",function(t){n.isTweening(r)||n.from(r,.7,{scale:1.5,ease:Bounce.easeOut});for(var e=c(t.target).closest(".shop-item").attr("id"),a=parseInt(e.replace(/[^0-9]/gi,"")),i=!1,o=0,s=g.items.length;o<s;o++)g.items[o].id==a&&(g.items[o].qty++,i=!0,console.log(g));if(!i){var l;for(o=0,s=m.items.length;o<s;o++)m.items[o].id==a&&(l=m.items[o]);l.qty=1,g.items.push(l)}u(),localStorage.setItem("cartData",JSON.stringify(g))})}),c("body").on("click",".cart-toggle",function(t){p.hasClass("visible")?n.isTweening(p)||(n.to(p,.7,{right:"-650px",ease:Back.easeIn.config(1.2)}),p.removeClass("visible"),y.removeClass("cart-toggle"),n.to(y,.5,{display:"none",opacity:0}),c("body").removeClass("no-scroll")):n.isTweening(p)||(n.to(p,.7,{right:"-50px",ease:Back.easeOut.config(1.2)}),p.addClass("visible"),y.addClass("cart-toggle"),n.to(y,.5,{display:"block",opacity:.8}),c("body").addClass("no-scroll"))}),p.on("click",".cart-item__less",function(t){for(var e=c(t.target).closest(".cart-item").attr("id"),a=parseInt(e.replace(/[^0-9]/gi,"")),i=0,o=g.items.length;i<o;i++)if(g.items[i].id==a){if(1<g.items[i].qty){g.items[i].qty--,u(),localStorage.setItem("cartData",JSON.stringify(g));break}if(confirm("Do you want to remove "+g.items[i].title+" from the cart?")){g.items.splice(i,1),u(),localStorage.setItem("cartData",JSON.stringify(g));break}}}),d.on("click",".shop-item__details",function(t){console.log("details")})}(jQuery,Handlebars,TweenMax);