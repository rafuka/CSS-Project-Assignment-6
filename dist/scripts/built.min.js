!function(c,t,m){var g={},d={},p=0,y=0,f=c("#total-price"),e=document.getElementById("shop-template").innerHTML,i=t.compile(e),a=document.getElementById("cart-template").innerHTML,u=t.compile(a),o=c("#shop-list"),s=c("#cart"),r=(c("#cart-list"),c("#modal-overlay")),v=c("#cart-num");if(localStorage.getItem("cartData")){for(var n=0,l=(d=JSON.parse(localStorage.getItem("cartData"))).items.length;n<l;n++)p+=d.items[n].qty,v.text(p);y=x(),f.text(y.toFixed(2));var h=u(d);document.getElementById("cart-list").innerHTML=h}else d={items:[]};function x(){for(var t=price=0,e=d.items.length;t<e;t++){var i=d.items[t];price+=i.price*i.qty}return console.log(price),price}c.getJSON("shopdata.json",function(t){var e=i(g=t);document.getElementById("shop-list").innerHTML+=e;var l=c("#cart-icon");o.on("click",".shop-item__add-btn",function(t){m.isTweening(l)||m.from(l,.7,{scale:1.5,ease:Bounce.easeOut});for(var e=c(t.target).closest(".shop-item").attr("id"),i=parseInt(e.replace(/[^0-9]/gi,"")),a=!1,o=0,s=d.items.length;o<s;o++)d.items[o].id==i&&(d.items[o].qty++,a=!0,console.log(d));if(!a){var r;for(o=0,s=g.items.length;o<s;o++)g.items[o].id==i&&(r=g.items[o]);r.qty=1,d.items.push(r)}y=x(),f.text(y.toFixed(2));var n=u(d);document.getElementById("cart-list").innerHTML=n,p++,v.text(p),localStorage.setItem("cartData",JSON.stringify(d))})}),c("body").on("click",".cart-toggle",function(t){s.hasClass("visible")?m.isTweening(s)||(m.to(s,.7,{right:"-650px",ease:Back.easeIn.config(1.2)}),s.removeClass("visible"),r.removeClass("cart-toggle"),m.to(r,.5,{display:"none",opacity:0}),c("body").removeClass("no-scroll")):m.isTweening(s)||(m.to(s,.7,{right:"-50px",ease:Back.easeOut.config(1.2)}),s.addClass("visible"),r.addClass("cart-toggle"),m.to(r,.5,{display:"block",opacity:.8}),c("body").addClass("no-scroll"))}),s.on("click",".cart-item__less",function(t){for(var e=c(t.target).closest(".cart-item").attr("id"),i=parseInt(e.replace(/[^0-9]/gi,"")),a=0,o=d.items.length;a<o;a++)if(d.items[a].id==i){if(1<d.items[a].qty){d.items[a].qty--,y=x(),f.text(y.toFixed(2));var s=u(d);document.getElementById("cart-list").innerHTML=s,p--,v.text(p),localStorage.setItem("cartData",JSON.stringify(d));break}if(confirm("Do you want to remove "+d.items[a].title+" from the cart?")){console.log("remove!"),d.items.splice(a,1),y=x(),f.text(y.toFixed(2));s=u(d);document.getElementById("cart-list").innerHTML=s,p--,v.text(p),localStorage.setItem("cartData",JSON.stringify(d));break}}}),o.on("click",".shop-item__details",function(t){console.log("details")})}(jQuery,Handlebars,TweenMax);